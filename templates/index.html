<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <title>ëŒ€ë™0ã…•ì§€ë„</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1598/1598196.png">
    <style>
        @font-face {
            font-family: 'Pretendard-Regular';
            src: url('https://cdn.jsdelivr.net/gh/Project-Noonnu/noonfonts_2107@1.1/Pretendard-Regular.woff') format('woff');
            font-weight: 400;
            font-style: normal;
        }

        * {
            font-family: 'Pretendard-Regular';
        }

        .nav-link {
            font-weight: bold;
        }

        #mapwrap {
            position: relative;
            overflow: hidden;
        }

        .category, .category * {
            margin: 0;
            padding: 0;
            color: #000;
        }

        .category {
            position: absolute;
            overflow: hidden;
            top: 10px;
            left: 10px;
            width: 400px;
            height: 60px;
            z-index: 10;
            border: 1px solid lightgrey;
            /* font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif; */
            font-size: 13px;
            text-align: center;
            background-color: #fff;
        }

        .category .menu_selected {
            background: #FF5F4A;
            color: #fff;
            border-left: 1px solid lightgrey;
            border-right: 1px solid lightgrey;
            margin: 0 -1px;
        }

        .category li {
            list-style: none;
            float: left;
            width: 80px;
            height: 60px;
            padding-top: 5px;
            cursor: pointer;
        }

        .category .ico_comm {
            display: block;
            margin: 0 auto 2px;
            width: 22px;
            height: 26px;
            background: url('https://i.ibb.co/TgnZbCV/mapicon.png') no-repeat;
        }

        .category .ico_all {
            background-position: -10px 0;
        }

        .category .ico_cafe {
            background-position: -10px -36px;
        }

        .category .ico_shop {
            background-position: -10px -72px;
        }

        .category .ico_household {
            background-position: -10px -108px;
        }

        .category .ico_etc {
            background-position: -10px -144px;
        }

        .wrap {
            position: absolute;
            left: 0;
            bottom: 30px;
            width: 240px;
            height: 132px;
            margin-left: -120px;
            text-align: left;
            overflow: hidden;
            font-size: 12px;
            /*font-family: 'Malgun Gothic', dotum, 'ë‹ì›€', sans-serif;*/
            line-height: 1.5;
        }

        .wrap * {
            padding: 0;
            margin: 0;
        }

        .wrap .info {
            width: 240px;
            height: 120px;
            border-radius: 5px;
            border-bottom: 2px solid #ccc;
            border-right: 1px solid #ccc;
            overflow: hidden;
            background: #fff;
        }

        .wrap .info:nth-child(1) {
            border: 0;
            box-shadow: 0px 1px 2px #888;
        }

        .info .title {
            padding: 5px 0 0 10px;
            height: 30px;
            background: #eee;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
            font-weight: bold;
        }

        .info .close {
            position: absolute;
            top: 8px;
            right: 10px;
            color: #888;
            width: 15px;
            height: 15px;
            background: url('https://i.postimg.cc/Cxz6bGfg/close.png');
        }

        .info .close:hover {
            cursor: pointer;
        }

        .info .body {
            position: relative;
            overflow: hidden;
        }

        .info .desc {
            position: relative;
            margin: 13px 0 0 13px;
            height: 75px;
        }

        .desc .ellipsis {
            font-size: 14px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .desc .jibun {
            font-size: 11px;
            color: #888;
            margin-top: -2px;
        }

        .info:after {
            content: '';
            position: absolute;
            margin-left: -12px;
            left: 50%;
            bottom: 0;
            width: 22px;
            height: 12px;
            background: url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/vertex_white.png')
        }

        .info .link {
            font-size: 12px;
            color: #5085BB;
        }

        @media ( max-width: 480px ) {
            .category {
                position: absolute;
                overflow: hidden;
                top: 10px;
                left: 10px;
                width: 300px;
                height: 60px;
                z-index: 10;
                border: 1px solid black;
                /*font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;*/
                font-size: 11px;
                text-align: center;
                background-color: #fff;
            }

            .category .menu_selected {
                background: #FF5F4A;
                color: #fff;
                border-left: 1px solid #915B2F;
                border-right: 1px solid #915B2F;
                margin: 0 -1px;
            }

            .category li {
                list-style: none;
                float: left;
                width: 60px;
                height: 60px;
                padding-top: 5px;
                cursor: pointer;
            }
        }

    </style>
</head>
<body>

<!-- HTML for Horizontal Menu -->
<div>
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container-fluid">
            <a href="/">
                <img src={{ url_for('static', filename='images/logo.png') }} alt="logo">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/board">ì»¤ë®¤ë‹ˆí‹°</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/about">About Us</a>
                    </li>
                </ul>
            </div>
            <div style="width: 350px; margin-right: 10px" class="alert alert-warning alert-dismissible fade show"
                 role="alert">
                <strong>ğŸ“ í˜„ì¬ ì„œìš¸ ì§€ì—­ë§Œ ì„œë¹„ìŠ¤ ì¤‘ì— ìˆì–´ìš”.</strong>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        </div>
    </nav>
</div>
<div id="mapwrap">
    <!-- ì§€ë„ê°€ í‘œì‹œë  div -->
    <div id="map" style="width:100%;height:1000px;"></div>
    <!-- ì§€ë„ ìœ„ì— í‘œì‹œë  ë§ˆì»¤ ì¹´í…Œê³ ë¦¬ -->
    <div style="margin-left: 2%; margin-top: 2%" class="category">
        <ul>
            <li id="allMenu" onclick="changeMarker('all')">
                <span class="ico_comm ico_all"></span>
                ì „ì²´
            </li>
            <li id="cafeMenu" onclick="changeMarker('cafe')">
                <span class="ico_comm ico_cafe"></span>
                ì¹´í˜/ì‹ë‹¹
            </li>
            <li id="shopMenu" onclick="changeMarker('shop')">
                <span class="ico_comm ico_shop"></span>
                ë¦¬í•„ìƒµ
            </li>
            <li id="householdMenu" onclick="changeMarker('household')">
                <span class="ico_comm ico_household"></span>
                ìƒí•„í’ˆì 
            </li>
            <li id="etcMenu" onclick="changeMarker('etc')">
                <span class="ico_comm ico_etc"></span>
                ê¸°íƒ€
            </li>
        </ul>
    </div>
</div>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=9b16bb18fadb4010e3a075c836c12861"></script>
<script>

    var mapContainer = document.getElementById('map'), // ì§€ë„ë¥¼ í‘œì‹œí•  div
        mapOption = {
            center: new kakao.maps.LatLng(37.55324494834374, 126.97268075540136), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
            level: 7 // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
        };

    var map = new kakao.maps.Map(mapContainer, mapOption); // ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
    var cafePositions = [];
    var cafeInfoArr = [];

    var shopPositions = [];
    var shopInfoArr = [];

    var householdPositions = [];
    var householdInfoArr = [];

    var etcPositions = [];
    var etcInfoArr = [];

    var markerImageSrc = 'https://i.ibb.co/3v4KYhh/mapicon2.png';  // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì£¼ì†Œì…ë‹ˆë‹¤. ìŠ¤í”„ë¼ì´íŠ¸ ì´ë¯¸ì§€ ì…ë‹ˆë‹¤
    cafeMarkers = []; // ì¹´í˜ì‹ë‹¹ ë§ˆì»¤ ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆì„ ë°°ì—´ì…ë‹ˆë‹¤
    shopMarkers = []; // ë¦¬í•„ìƒµ ë§ˆì»¤ ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆì„ ë°°ì—´ì…ë‹ˆë‹¤
    householdMarkers = []; // ìƒí•„í’ˆì  ë§ˆì»¤ ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆì„ ë°°ì—´ì…ë‹ˆë‹¤
    etcMarkers = []; // ê¸°íƒ€ ë§ˆì»¤ ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆì„ ë°°ì—´ì…ë‹ˆë‹¤


    f_init();   /// ì´ˆê¸°í™”
    function f_init() {
        show_cafe();
        show_shop();
        show_household();
        show_etc();
        refreshMap();
    }

    function deleteMarker() {

        for (var i = 0; i < cafePositions.length; i++) {
            cafeMarkers[i].setMap(null);
        }


        for (var i = 0; i < shopPositions.length; i++) {
            shopPositions[i].setMap(null);
        }


        for (var i = 0; i < householdPositions.length; i++) {
            householdPositions[i].setMap(null);
        }


        for (var i = 0; i < etcPositions.length; i++) {
            etcPositions[i].setMap(null);
        }
    }

    // ì¹´í˜ì‹ë‹¹ ë§ˆì»¤ê°€ í‘œì‹œë  ì¢Œí‘œ ë°°ì—´ì…ë‹ˆë‹¤

    function show_cafe() {
        $.ajax({
            type: 'GET',
            url: '/getdatacafe',
            data: {},
            async: false,
            success: function (response) {
                let rows = response['cafe']

                for (let i = 0; i < rows.length; i++) {
                    let temp = rows[i]
                    let Name = temp['Name']
                    let category = temp['Category'];
                    let Address = temp['Address']
                    let Latitude = temp['Latitude']
                    let Longitude = temp['Longitude']
                    let url = temp['url']

                    cafePositions.push(new kakao.maps.LatLng(Latitude, Longitude));

                    var obj = new Object();
                    obj.name = Name;
                    obj.address = Address;
                    obj.category = category;
                    obj.latitude = Latitude;
                    obj.longitude = Longitude;
                    obj.url = url;
                    cafeInfoArr.push(obj);

                }

            }
        })
    };


    function show_shop() {
        $.ajax({
            type: 'GET',
            url: '/getdatarefill',
            data: {},
            async: false,
            success: function (response) {
                let rows = response['refill']

                for (let i = 0; i < rows.length; i++) {
                    let temp = rows[i];
                    let category = temp['Category'];
                    let Name = temp['Name'];
                    let Address = temp['Address'];
                    let Latitude = temp['Latitude'];
                    let Longitude = temp['Longitude'];
                    let url = temp['url']

                    shopPositions.push(new kakao.maps.LatLng(Latitude, Longitude));

                    var obj = new Object();
                    obj.name = Name;
                    obj.address = Address;
                    obj.category = category;
                    obj.latitude = Latitude;
                    obj.longitude = Longitude;
                    obj.url = url;
                    shopInfoArr.push(obj);

                }

            }
        })
    };


    function show_household() {
        $.ajax({
            type: 'GET',
            url: '/getdatadaily',
            data: {},
            async: false,
            success: function (response) {
                let rows = response['daily']

                for (let i = 0; i < rows.length; i++) {
                    let temp = rows[i];
                    let Name = temp['Name'];
                    let category = temp['Category'];
                    let Address = temp['Address'];
                    let Latitude = temp['Latitude'];
                    let Longitude = temp['Longitude'];
                    let url = temp['url']

                    householdPositions.push(new kakao.maps.LatLng(Latitude, Longitude));

                    var obj = new Object();
                    obj.name = Name;
                    obj.address = Address;
                    obj.category = category;
                    obj.latitude = Latitude;
                    obj.longitude = Longitude;
                    obj.url = url;
                    householdInfoArr.push(obj);

                }

            }
        })
    };


    function show_etc() {
        $.ajax({
            type: 'GET',
            url: '/getdataetc',
            data: {},
            async: false,
            success: function (response) {
                let rows = response['etc']

                for (let i = 0; i < rows.length; i++) {
                    let temp = rows[i];
                    let Name = temp['Name'];
                    let category = temp['Category'];
                    let Address = temp['Address'];
                    let Latitude = temp['Latitude'];
                    let Longitude = temp['Longitude'];
                    let url = temp['url']

                    etcPositions.push(new kakao.maps.LatLng(Latitude, Longitude));

                    var obj = new Object();
                    obj.name = Name;
                    obj.address = Address;
                    obj.category = category;
                    obj.latitude = Latitude;
                    obj.longitude = Longitude;
                    obj.url = url;
                    etcInfoArr.push(obj);

                }

            }
        })
    };


    //refreshMap();
    function refreshMap() {
        createCafeMarkers(); // ì¹´í˜ì‹ë‹¹ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ì¹´í˜ì‹ë‹¹ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
        createShopMarkers(); // ë¦¬í•„ìƒµ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ë¦¬í•„ìƒµ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
        createHouseholdMarkers(); // ìƒí•„í’ˆì  ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ìƒí•„í’ˆì  ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
        createEtcMarkers(); // ê¸°íƒ€ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ê¸°íƒ€ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤

        changeMarker('all'); // ì§€ë„ì— ì „ì²´ ë§ˆì»¤ê°€ ë³´ì´ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
    }

    // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì£¼ì†Œì™€, í¬ê¸°, ì˜µì…˜ìœ¼ë¡œ ë§ˆì»¤ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ì—¬ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createMarkerImage(src, size, options) {
        var markerImage = new kakao.maps.MarkerImage(src, size, options);
        return markerImage;
    }

    // ì¢Œí‘œì™€ ë§ˆì»¤ì´ë¯¸ì§€ë¥¼ ë°›ì•„ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ì—¬ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createMarker(position, image) {
        var marker = new kakao.maps.Marker({
            position: position,
            image: image
        });

        return marker;
    }

    // ì¹´í˜ì‹ë‹¹ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ì¹´í˜ì‹ë‹¹ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createCafeMarkers() {
        for (var i = 0; i < cafePositions.length; i++) {

            var imageSize = new kakao.maps.Size(19, 26),
                imageOptions = {
                    spriteOrigin: new kakao.maps.Point(10, 0),
                    spriteSize: new kakao.maps.Size(36, 134)
                };

            // ë§ˆì»¤ì´ë¯¸ì§€ì™€ ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
            var markerImage = createMarkerImage(markerImageSrc, imageSize, imageOptions),
                marker = createMarker(cafePositions[i], markerImage);

            // ìƒì„±ëœ ë§ˆì»¤ë¥¼ ì¹´í˜ì‹ë‹¹ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
            cafeMarkers.push(marker);
        }
    }

    // ì¹´í˜ì‹ë‹¹ ë§ˆì»¤ë“¤ì˜ ì§€ë„ í‘œì‹œ ì—¬ë¶€ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function setCafeMarkers(map) {
        for (var i = 0; i < cafeMarkers.length; i++) {
            cafeMarkers[i].setMap(map);
            createOverlay(cafeMarkers[i], map, i, 'cafe');
        }
    }

    // ë¦¬í•„ìƒµ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ë¦¬í•„ìƒµ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createShopMarkers() {
        for (var i = 0; i < shopPositions.length; i++) {
            var imageSize = new kakao.maps.Size(19, 26),
                imageOptions = {
                    spriteOrigin: new kakao.maps.Point(10, 36),
                    spriteSize: new kakao.maps.Size(36, 134)
                };

            // ë§ˆì»¤ì´ë¯¸ì§€ì™€ ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
            var markerImage = createMarkerImage(markerImageSrc, imageSize, imageOptions),
                marker = createMarker(shopPositions[i], markerImage);

            // ìƒì„±ëœ ë§ˆì»¤ë¥¼ ë¦¬í•„ìƒµ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
            shopMarkers.push(marker);
        }
    }

    // ë¦¬í•„ìƒµ ë§ˆì»¤ë“¤ì˜ ì§€ë„ í‘œì‹œ ì—¬ë¶€ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function setShopMarkers(map) {
        for (var i = 0; i < shopMarkers.length; i++) {
            shopMarkers[i].setMap(map);
            createOverlay(shopMarkers[i], map, i, 'shop');
        }
    }

    // ìƒí•„í’ˆì  ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ìƒí•„í’ˆì  ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createHouseholdMarkers() {
        for (var i = 0; i < householdPositions.length; i++) {

            var imageSize = new kakao.maps.Size(19, 26),
                imageOptions = {
                    spriteOrigin: new kakao.maps.Point(10, 72),
                    spriteSize: new kakao.maps.Size(36, 134)
                };

            // ë§ˆì»¤ì´ë¯¸ì§€ì™€ ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
            var markerImage = createMarkerImage(markerImageSrc, imageSize, imageOptions),
                marker = createMarker(householdPositions[i], markerImage);

            // ìƒì„±ëœ ë§ˆì»¤ë¥¼ ìƒí•„í’ˆì  ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
            householdMarkers.push(marker);
        }
    }

    // ìƒí•„í’ˆì  ë§ˆì»¤ë“¤ì˜ ì§€ë„ í‘œì‹œ ì—¬ë¶€ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function setHouseholdMarkers(map) {
        for (var i = 0; i < householdMarkers.length; i++) {
            householdMarkers[i].setMap(map);
            createOverlay(householdMarkers[i], map, i, 'household');
        }
    }

    // ê¸°íƒ€ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ìƒí•„í’ˆì  ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createEtcMarkers() {
        for (var i = 0; i < etcPositions.length; i++) {

            var imageSize = new kakao.maps.Size(19, 26),
                imageOptions = {
                    spriteOrigin: new kakao.maps.Point(10, 108),
                    spriteSize: new kakao.maps.Size(36, 134)
                };

            // ë§ˆì»¤ì´ë¯¸ì§€ì™€ ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
            var markerImage = createMarkerImage(markerImageSrc, imageSize, imageOptions),
                marker = createMarker(etcPositions[i], markerImage);

            // ìƒì„±ëœ ë§ˆì»¤ë¥¼ ìƒí•„í’ˆì  ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
            etcMarkers.push(marker);

        }

    }

    // ê¸°íƒ€ ë§ˆì»¤ë“¤ì˜ ì§€ë„ í‘œì‹œ ì—¬ë¶€ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function setEtcMarkers(map) {
        for (var i = 0; i < etcMarkers.length; i++) {
            etcMarkers[i].setMap(map);
            createOverlay(etcMarkers[i], map, i, 'etc');
        }

    }


    // ì¹´í…Œê³ ë¦¬ë¥¼ í´ë¦­í–ˆì„ ë•Œ typeì— ë”°ë¼ ì¹´í…Œê³ ë¦¬ì˜ ìŠ¤íƒ€ì¼ê³¼ ì§€ë„ì— í‘œì‹œë˜ëŠ” ë§ˆì»¤ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤
    function changeMarker(type) {

        map = new kakao.maps.Map(mapContainer, mapOption);

        var allMenu = document.getElementById('allMenu');
        var cafeMenu = document.getElementById('cafeMenu');
        var shopMenu = document.getElementById('shopMenu');
        var householdMenu = document.getElementById('householdMenu');
        var etcMenu = document.getElementById('etcMenu');

        setCafeMarkers(null);
        setShopMarkers(null);
        setHouseholdMarkers(null);
        setEtcMarkers(null);

        //deleteMarker();


        // ì „ì²´ ì¹´í…Œê³ ë¦¬ê°€ í´ë¦­ëì„ ë•Œ
        if (type === 'all') {
            // ì „ì²´ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½í•˜ê³ 
            allMenu.className = 'menu_selected';
            // ë‚˜ë¨¸ì§€ ì¹´í…Œê³ ë¦¬ëŠ” ì„ íƒë˜ì§€ ì•Šì€ ìŠ¤íƒ€ì¼ë¡œ ë°”ê¿‰ë‹ˆë‹¤
            cafeMenu.className = '';
            shopMenu.className = '';
            householdMenu.className = '';
            etcMenu.className = '';

            // ì „ì²´ ë§ˆì»¤ê°€ ì§€ë„ì— í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
            setCafeMarkers(map);
            setShopMarkers(map);
            setHouseholdMarkers(map);
            setEtcMarkers(map);

        } else if (type === 'cafe') {

            // ì¹´í˜ì‹ë‹¹ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½í•˜ê³ 
            cafeMenu.className = 'menu_selected';

            // ë‚˜ë¨¸ì§€ ì¹´í…Œê³ ë¦¬ëŠ” ì„ íƒë˜ì§€ ì•Šì€ ìŠ¤íƒ€ì¼ë¡œ ë°”ê¿‰ë‹ˆë‹¤
            allMenu.className = '';
            shopMenu.className = '';
            householdMenu.className = '';
            etcMenu.className = '';

            // ì¹´í˜ì‹ë‹¹ ë§ˆì»¤ë“¤ë§Œ ì§€ë„ì— í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤

            setShopMarkers(null);
            setHouseholdMarkers(null);
            setEtcMarkers(null);
            setCafeMarkers(map);

        } else if (type === 'shop') { // ë¦¬í•„ìƒµ ì¹´í…Œê³ ë¦¬ê°€ í´ë¦­ëì„ ë•Œ

            // ë¦¬í•„ìƒµ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½í•˜ê³ 
            shopMenu.className = 'menu_selected';

            // ë‚˜ë¨¸ì§€ ì¹´í…Œê³ ë¦¬ëŠ” ì„ íƒë˜ì§€ ì•Šì€ ìŠ¤íƒ€ì¼ë¡œ ë°”ê¿‰ë‹ˆë‹¤
            allMenu.className = '';
            cafeMenu.className = '';
            householdMenu.className = '';
            etcMenu.className = '';

            // ë¦¬í•„ìƒµ ë§ˆì»¤ë“¤ë§Œ ì§€ë„ì— í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
            setCafeMarkers(null);
            setShopMarkers(map);
            setHouseholdMarkers(null);
            setEtcMarkers(null);

        } else if (type === 'household') { // ìƒí•„í’ˆì  ì¹´í…Œê³ ë¦¬ê°€ í´ë¦­ëì„ ë•Œ

            // ìƒí•„í’ˆì  ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½í•˜ê³ 
            householdMenu.className = 'menu_selected';

            // ë‚˜ë¨¸ì§€ ì¹´í…Œê³ ë¦¬ëŠ” ì„ íƒë˜ì§€ ì•Šì€ ìŠ¤íƒ€ì¼ë¡œ ë°”ê¿‰ë‹ˆë‹¤
            allMenu.className = '';
            cafeMenu.className = '';
            shopMenu.className = '';
            etcMenu.className = '';

            // ìƒí•„í’ˆì  ë§ˆì»¤ë“¤ë§Œ ì§€ë„ì— í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
            setCafeMarkers(null);
            setShopMarkers(null);
            setHouseholdMarkers(map);
            setEtcMarkers(null);

        } else if (type === 'etc') { // ê¸°íƒ€ ì¹´í…Œê³ ë¦¬ê°€ í´ë¦­ëì„ ë•Œ

            // ê¸°íƒ€ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½í•˜ê³ 
            etcMenu.className = 'menu_selected';

            // ë‚˜ë¨¸ì§€ ì¹´í…Œê³ ë¦¬ëŠ” ì„ íƒë˜ì§€ ì•Šì€ ìŠ¤íƒ€ì¼ë¡œ ë°”ê¿‰ë‹ˆë‹¤
            allMenu.className = '';
            cafeMenu.className = '';
            shopMenu.className = '';
            householdMenu.className = '';

            // ê¸°íƒ€ ë§ˆì»¤ë“¤ë§Œ ì§€ë„ì— í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
            setCafeMarkers(null);
            setShopMarkers(null);
            setHouseholdMarkers(null);
            setEtcMarkers(map);
        }
    }

    // var count = 0;
    function createOverlay(markers, map, index, category) {
        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
        // count++;

        var overlay = new kakao.maps.CustomOverlay({
            position: markers.getPosition()
        });

        var wrap = document.createElement('div');
        wrap.className = 'wrap';
        var info = document.createElement('div');
        info.className = 'info';
        var title = document.createElement('div');
        title.className = 'title';


        var selectCategory = [];

        if (category == 'cafe') {

            selectCategory = cafeInfoArr;
        } else if (category == 'shop') {

            selectCategory = shopInfoArr;
        } else if (category == 'household') {

            selectCategory = householdInfoArr;
        } else if (category == 'etc') {

            selectCategory = etcInfoArr;
        }


        var subject = selectCategory[index].name;

        title.appendChild(document.createTextNode(subject));
        var closeDiv = document.createElement('div');
        closeDiv.className = 'close';
        closeDiv.onclick = function () {
            overlay.setMap(null);
        }

        var body = document.createElement('body');
        body.classname = "body";
        var desc = document.createElement('div');
        desc.className = 'desc';

        var ellipsis = document.createElement('div');
        ellipsis.className = 'ellipsis';
        //ellipsis.innerHTML = 'ì œì£¼ì‹œ';

        ellipsis.innerHTML = selectCategory[index].address;

        //var jibunEllipsis = document.createElement('div');
        //jibunEllipsis.className = 'jibun ellipsis';
        //jibunEllipsis.innerHTML = '(ìš°) 63309 (ì§€ë²ˆ) ì˜í‰ë™ 2181';
        //jibunEllipsis.innerHTML = selectCategory[index].address;

        var link = document.createElement('div');
        var aTag = document.createElement('a');
        aTag.className = 'link';
        aTag.href = selectCategory[index].url;
        // 'https://map.kakao.com/link/map/link/map/' + subject + ',' + selectCategory[index].latitude + ',' + selectCategory[index].longitude;
        aTag.target = '_blank';
        aTag.appendChild(document.createTextNode('ì¹´ì¹´ì˜¤ë§µ ìƒì„¸ì •ë³´ ë³´ê¸°'));
        link.append(aTag);
        title.append(closeDiv);
        desc.append(ellipsis);
        //desc.append(jibunEllipsis);
        desc.append(link);
        body.append(desc);
        info.append(title);
        info.append(body);
        wrap.append(info);

        overlay.setContent(wrap);

        // ë§ˆì»¤ë¥¼ í´ë¦­í–ˆì„ ë•Œ ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤
        kakao.maps.event.addListener(markers, 'click', function () {
            overlay.setMap(map);
        });
    }

</script>
</body>
</html>